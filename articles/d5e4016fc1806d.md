---
title: "Flutterã®useStreamã‚’ä½¿ã†ã¨ä½•åº¦ã‚‚buildãŒå‘¼ã³å‡ºã•ã‚Œã¦ã—ã¾ã†"
emoji: "ğŸ˜¸"
type: "tech"
topics: [Flutter, useStream]
published: true
---

```dart
Stream<int> stopwatch() async* {
  int i = 0;
  while (true) {
    yield i++;
    await Future.delayed(const Duration(seconds: 1));
  }
}

class Home extends HookWidget {
  const Home({super.key});

  @override
  Widget build(BuildContext context) {
    final timer = useStream(stopwatch()).data ?? 0;

    return Scaffold(body: Center(child: Text(timer.toString())));
  }
}
```

ã“ã‚Œã¯å˜ç´”ãª Stream ã‚’ä½œæˆã—ã¦ãã‚Œã‚’ useStream ã§ wrap ã™ã‚‹ã¨ã„ã†ã‚³ãƒ¼ãƒ‰ã§ã™ãŒã€ã“ã‚Œã¯ã¾ã¨ã‚‚ã«å‹•ãã¾ã›ã‚“ã€‚

```dart
class Home extends HookWidget {
  const Home({super.key});

  @override
  Widget build(BuildContext context) {
    final timerStream = useMemoized(() => stopwatch());
    final timer = useStream(timerStream).data ?? 0;

    return Scaffold(body: Center(child: Text(timer.toString())));
  }
}
```

å½“ãŸã‚Šå‰ã§ã™ãŒã€ã“ã†ã—ã¾ã—ã‚‡ã†ã€‚
ã™ã”ãå½“ãŸã‚Šå‰ã®ã“ã¨ã§ã™ãŒã€ãƒãƒã‚Šã¾ã—ãŸã€‚

FirebaseAuth ã‚’ä½¿ã†å ´åˆã¯ã€ã“ã†ã€‚

```dart
User? useCurrentUser(WidgetRef ref) {
  final userStream = useMemoized(() => FirebaseAuth.instance.authStateChanges());
  return useStream(userStream).data;
}
```
