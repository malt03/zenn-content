---
title: "sdkmanager ã® NoClassDefFoundError ã¨æˆ¦ã†"
emoji: "ğŸ‘Š"
type: "tech"
topics: ["Unity"]
published: true
---

# å‚è€ƒ

å‚è€ƒã«ãªã‚‹è¨˜äº‹ã¯å¤šã‹ã£ãŸãŒã€æœ€æ–°ã®çŠ¶æ³ã«å¯¾å¿œã—ã¦ãŠã‚‰ãšæ‰‹ã“ãšã£ãŸã€‚  
ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã•ã›ã¦ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚

- ä»¥ä¸‹äºŒã¤ã¯ã€å¤ã„ Android Studio ã‚’å…¥ã‚Œã¦ã„ã‚‹å ´åˆã¯å‹•ããã†ã ã‘ã©ã€æœ€æ–°ã® Android Studio ã§ã¯å‹•ã‹ãªã„ã£ã½ã„
  - [React Native ç’°å¢ƒæ§‹ç¯‰æ™‚ã« sdkmanager ã« NoClassDefFoundError ã£ã¦è¨€ã‚ã‚ŒãŸã¨ã„ã†è©±](https://qiita.com/jintz/items/a5fb0c16aa9cab703b1e)
  - [android: sdkmanager ã‚’èµ·å‹•ã™ã‚‹ã¨ã€NoClassDefFoundError ã§èµ·å‹•ã§ããªã„](https://www.ninton.co.jp/archives/2723)
- ä»¥ä¸‹ã¯ã€ adoptopenjdk8 ãŒ deprecated ã«ãªã£ã¦ã„ã‚‹ä¸Šã€å¾Œç¶šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚‚ã®ã‚‚ Apple Sillicon ã«ã¯å¯¾å¿œã—ã¦ã„ãªã‹ã£ãŸ
  - [sdkmanager ã§ jdk ãƒãƒ¼ã‚¸ãƒ§ãƒ³é•ã„ã§ã“ã‘ã‚‹ã®ã‚’å¯¾å‡¦ã™ã‚‹](https://zenn.dev/ryotabannai/articles/9a55a051289cd819c96a)

# Overview

Unity ç­‰ã§ Android ç”¨ã®ãƒ“ãƒ«ãƒ‰ã‚’è¡Œã†ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚

```
Could not determine the dependencies of task ':unityLibrary:GoogleMobileAdsPlugin.androidlib:generateDebugRFile'.
> Failed to install the following Android SDK packages as some licences have not been accepted.
     platforms;android-31 Android SDK Platform 31
  To build this project, accept the SDK license agreements and install the missing components using the Android Studio SDK Manager.
  All licenses can be accepted using the sdkmanager command line tool:
  sdkmanager.bat --licenses
```

ã“ã‚Œã‚’ãªã‚“ã¨ã‹ã™ã‚‹ã€‚

# sdkmanager ã®å®Ÿè¡Œ

è§£æ±ºã™ã‚‹ãŸã‚ã«ã¯ã€ã¾ãšã¯ `sdkmanager` ã‚³ãƒãƒ³ãƒ‰ã®ãƒ‘ã‚¹ã‚’ç¢ºèªã™ã‚‹ã€‚  
Unity ã§ã‚ã‚Œã°ã€ `Unity > Settings... > External Tools > Android` ã§ã€ Android SDK ã®å ´æ‰€ã‚’ç¢ºèªã§ãã‚‹ã€‚  
SDK ã®ä¸­ã« `sdkmanager` ãŒã‚ã‚‹ã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã¿ã‚‹ã€‚

```
/Applications/Unity/Hub/Editor/6000.0.23f1/PlaybackEngines/AndroidPlayer/SDK/tools/bin/sdkmanager --licenses
```

ã“ã‚Œã§ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã€y é€£æ‰“ã§ã†ã¾ãã„ããªã‚‰è¨€ã†äº‹ã¯ãªã„ãŒã€ã©ã†ã‚‚å¤§æŠµã¯ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚

```
Exception in thread "main" java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema
	at com.android.repository.api.SchemaModule$SchemaModuleVersion.<init>(SchemaModule.java:156)
	at com.android.repository.api.SchemaModule.<init>(SchemaModule.java:75)
	at com.android.sdklib.repository.AndroidSdkHandler.<clinit>(AndroidSdkHandler.java:81)
	at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:73)
	at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:48)
Caused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlSchema
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
	... 5 more
```

ã©ã†ã‚„ã‚‰ `sdkmanager` ã¯ java8 ä»¥ä¸‹ã—ã‹å¯¾å¿œã—ã¦ãŠã‚‰ãšã€9 ä»¥ä¸Šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® java ã§ã¯ä¸Šè¨˜ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚‰ã—ã„ã€‚ãªã‚“ã˜ã‚ƒãã‚Šã‚ƒã€‚

# java8 ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã¨è¨€ã†ã“ã¨ã§èª ã«éºæ†¾ãªãŒã‚‰ java8 ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚  
ã“ã‚Œã¯ã‚ãã¾ã§ `sdkmanager` ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã ã‘ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã®ã§ã€ Unity ç­‰ã®å®Ÿè¡Œç’°å¢ƒã«å½±éŸ¿ã¯ãªã„ã€‚  
Oracle ã® [Archive](https://www.oracle.com/jp/java/technologies/javase/javase8u211-later-archive-downloads.html) ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹ã€‚

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸ JDK ã«ãƒ‘ã‚¹ã‚’é€šã™ã€‚

```
export JAVA_HOME="/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home"
export PATH=$JAVA_HOME/bin:$PATH
```

ã“ã‚Œã¯ `sdkmanager` ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã ã‘ã®è¨­å®šãªã®ã§ã€å®Ÿè¡ŒãŒå®Œäº†ã—ãŸã‚‰æ¶ˆã™ã€‚

# å†åº¦ sdkmanager ã‚’å®Ÿè¡Œ

```
/Applications/Unity/Hub/Editor/6000.0.23f1/PlaybackEngines/AndroidPlayer/SDK/tools/bin/sdkmanager --licenses
```

ã“ã‚Œã§ä¸Šæ‰‹ãã„ãã¯ãšã€‚
